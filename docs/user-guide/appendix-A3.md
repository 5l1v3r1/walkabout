# Appendix A.3  Model

These file are written by the modeling application. The **`fin`** (FEHM) or **`ama`** (Amanzi) file provides the internodal liquid flux values. The **`avs`** file provides Porosity, liquid saturation and liquid density used by the model application. See FEHM or Amanzi documentation for more on these files. 

Note: The order of values in these files must be the same order as the node numbering in the Geometry files.


## A.3.1 Flux **`fin`** or **`ama`**

The **`fin`** flux file is an FEHM restart file in ASCII format. 
The file includes the number of mass flux values followed by mass flux value (kg/s) for each connection of each node, starting with node 1.
If the liquid fluxes are not found in the fin file, Walkabout will terminate.
Figure A3-1 shows an example for 20 nodes.

```
FEHM V3.4.0lbUbuntu16 19-10-30   11/05/2019    15:43:07
Head versus Pressure Test - Head formulation                                    
   365.00000000000000     
       20 nddp
pressure   
    1.467096705810299        1.467096705805431        1.467096705823175        1.467096705822709    
    1.467096705836050        1.467096705801854        1.467096705814071        1.467096705814072    
    1.467096705832279        1.467096705826289        1.388976889740393        1.388976889740393    
    1.388976889740393        1.388976889740393        1.388976889740393        1.388976889740393    
    1.388976889740393        1.388976889740393        1.388976889740393        1.388976889740393    
liquid flux
         142
    0.000000000000000       0.1938474885591716E-11   0.1313687996742065E-11   0.1911693415726907E-10
  -0.1938474885591716E-11    0.000000000000000      -0.7065622914649585E-11    0.000000000000000    
  -0.2687820700701320E-11    0.000000000000000       0.3808242471967515E-10   0.7065622914649585E-11
    0.000000000000000       0.1852440307127056E-12    0.000000000000000       0.2831989962372493E-11
    0.000000000000000       0.3863442649912402E-10  -0.1852440307127056E-12    0.000000000000000    
  -0.5312303637798873E-11    0.000000000000000      -0.2977264498689923E-11    0.000000000000000    
   0.3861995462524857E-10   0.5312303637798873E-11    0.000000000000000        0.000000000000000    
   0.1518301965630428E-11    0.000000000000000       0.1951748899641146E-10  -0.1313687996742065E-11
   -0.000000000000000        0.000000000000000      -0.4864976882965662E-11    0.000000000000000    
   0.1898556528211013E-10   0.2687820700701320E-11   -0.000000000000000       0.4864976882965662E-11
    0.000000000000000      -0.2652659151017264E-15    0.000000000000000        0.000000000000000    
    0.000000000000000       0.3835120691436295E-10  -0.2831989962372493E-11   -0.000000000000000    
   0.2652659151017264E-15    0.000000000000000      -0.7250601679447189E-11    0.000000000000000    
    0.000000000000000        0.000000000000000       0.3835122750170753E-10   0.2977264498689923E-11
   -0.000000000000000       0.7250601679447189E-11    0.000000000000000       0.2385447952538125E-11
    0.000000000000000        0.000000000000000        0.000000000000000       0.3891768108237089E-10
  -0.1518301965630428E-11  -0.2385447952538125E-11    0.000000000000000        0.000000000000000    
    0.000000000000000        0.000000000000000       0.1936565887415391E-10  -0.1911693415726907E-10
   -0.000000000000000       -0.000000000000000       -0.000000000000000        0.000000000000000    
   -0.000000000000000       -0.000000000000000      -0.3808242471967515E-10   -0.000000000000000    
   -0.000000000000000       -0.000000000000000        0.000000000000000        0.000000000000000    
   -0.000000000000000        0.000000000000000       -0.000000000000000      -0.3863442649912402E-10
   -0.000000000000000       -0.000000000000000       -0.000000000000000        0.000000000000000    
    0.000000000000000       -0.000000000000000        0.000000000000000       -0.000000000000000    
  -0.3861995462524857E-10   -0.000000000000000       -0.000000000000000       -0.000000000000000    
    0.000000000000000        0.000000000000000       -0.000000000000000        0.000000000000000    
   -0.000000000000000      -0.1951748899641146E-10   -0.000000000000000        0.000000000000000    
    0.000000000000000        0.000000000000000       -0.000000000000000      -0.1898556528211013E-10
   -0.000000000000000        0.000000000000000       -0.000000000000000        0.000000000000000    
   -0.000000000000000      -0.3835120691436295E-10   -0.000000000000000        0.000000000000000    
   -0.000000000000000        0.000000000000000        0.000000000000000       -0.000000000000000    
  -0.3835122750170753E-10   -0.000000000000000        0.000000000000000       -0.000000000000000    
    0.000000000000000        0.000000000000000       -0.000000000000000      -0.3891768108237089E-10
   -0.000000000000000        0.000000000000000       -0.000000000000000        0.000000000000000    
    0.000000000000000       -0.000000000000000      -0.1936565887415391E-10    0.000000000000000   
```
*Figure A3-1 **`fin`** file with flux values* 


The **`ama`** flux file is written by Amanzi. The model velocity fields are calculated from the cell centers to the vertices in node order Vx, Vy, Vz. 
The first line of the file is the number of nodes.
Figure A3-2 shows an example for 20 nodes.

```
20
0	8.30044e-06	0	        1.93481e-16
1	8.29954e-06	6.26255e-10	4.79135e-11
2	8.29736e-06	0	        -1.41345e-17
3	8.29247e-06	2.48663e-09	1.76177e-10
4	8.2853e-06	4.4489e-17	-1.47602e-16
5	8.27388e-06	5.36507e-09	3.57899e-10
6	8.25954e-06	-4.4489e-17	1.04503e-16
7	8.24095e-06	8.23985e-09	5.3618e-10
8	8.22015e-06	-8.8978e-17	1.78651e-16
9	8.19713e-06	9.74832e-09	6.33088e-10
10	8.17356e-06	-8.8978e-17	2.52799e-16
11	8.15041e-06	9.47623e-09	6.20643e-10
12	8.12821e-06	-4.4489e-17	-5.86235e-17
13	8.10821e-06	7.9846e-09	5.28764e-10
14	8.08992e-06	4.4489e-17	6.00138e-17
15	8.07444e-06	6.07319e-09	4.06191e-10
16	8.06076e-06	4.4489e-17	6.00138e-17
17	8.0497e-06	4.27967e-09	2.88404e-10
18	8.04018e-06	-4.4489e-17	-1.77261e-16
19	8.0328e-06	2.81351e-09	1.90585e-10
```
*Figure A3-2 **`ama`** file with flux values* 



## A.3.2 Properties  **`avs`** 

Porosity, liquid saturation and liquid density are read from an ASCII **avs** file produced by the model application (the contour macro in FEHM). 
This uses an AVS format for node attributes. The header includes number of nodes and attribute names followed by the property data.
Figure A3-3 shows an example for 20 nodes.

```
04  1   1   1   1   1
Liquid Pressure (MPa), (MPa)
Saturation, (no dim)
Porosity, (no dim)
Liquid Density (kg/m**3), (kg/m**3)
0001  1.46709671  1.00000000  140.000000  0.100000000
0002  1.46709671  1.00000000  140.000000  0.100000000
0003  1.46709671  1.00000000  140.000000  0.100000000
0004  1.46709671  1.00000000  140.000000  0.100000000
0005  1.46709671  1.00000000  140.000000  0.100000000
0006  1.46709671  1.00000000  140.000000  0.100000000
0007  1.46709671  1.00000000  140.000000  0.100000000
0008  1.46709671  1.00000000  140.000000  0.100000000
0009  1.46709671  1.00000000  140.000000  0.100000000
0010  1.46709671  1.00000000  140.000000  0.100000000
0011  1.38897689  1.00000000  140.000000  0.100000000
0012  1.38897689  1.00000000  140.000000  0.100000000
0013  1.38897689  1.00000000  140.000000  0.100000000
0014  1.38897689  1.00000000  140.000000  0.100000000
0015  1.38897689  1.00000000  140.000000  0.100000000
0016  1.38897689  1.00000000  140.000000  0.100000000
0017  1.38897689  1.00000000  140.000000  0.100000000
0018  1.38897689  1.00000000  140.000000  0.100000000
0019  1.38897689  1.00000000  140.000000  0.100000000
0020  1.38897689  1.00000000  140.000000  0.100000000
```
*Figure A3-3 **`avs`** file with property values* 
